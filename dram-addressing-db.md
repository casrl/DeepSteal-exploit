# A list of known DRAM addressing schemes

This document lists reverse-engineered **physical address to DRAM address mapping** (i.e., DRAM addressing function) for several generations of Intel processors. DRAM addressing function is critical for studying rowhammer as well as DRAM-based side channels. The physical address bits are denoted as $A_{0} \sim A_{end}$. All DRAM addressing functions are based on a **one DIMM single channel** configuration in systems with desktop processors. 

-----
## Ivy-bridge/Haswell processors
<center>

| DRAM | Ranks | Banks x Rows x Columns x Bits | Bank Selection Bits$^*$ | Row Bits |
|-----------|-------|:-------------------------------:|:----------------:|-----------|
| 4GB  DDR3     | 2R    | 8 x 15 x 10 x 64              | $A_{13} \oplus A_{17}$, $A_{14} \oplus A_{18}$, $A_{15} \oplus A_{19}$, $A_{16} \oplus A_{20}$|  $A_{17} \sim A_{end}$|
| 4GB  DDR3     | 1R    | 8 x 16 x 10 x 64              | $A_{13} \oplus A_{16}$, $A_{14} \oplus A_{17}$, $A_{15} \oplus A_{18}$ | $A_{16} \sim A_{end}$ |
| 8GB  DDR3     | 2R    | 8 x 16 x 10 x 64              | $A_{13} \oplus A_{17}$, $A_{14} \oplus A_{18}$, $A_{15} \oplus A_{19}$, $A_{16} \oplus A_{20}$|  $A_{17} \sim A_{end}$|

</center>

> ```Tested on i7-3770 and i5-4590```

-----
## Skylake processors
<center>

| DRAM Size | Ranks | Banks x Rows x Columns x Bits | Bank Selection Bits$^*$ | Row Bits |
|-----------|-------|:-------------------------------:|:----------------:|-----------|
| 4GB  DDR3     | 1R    | 8 x 16 x 10 x 64              | $A_{13} \oplus A_{16}$, $A_{14} \oplus A_{17}$, $A_{15} \oplus A_{18}$ |  $A_{16} \sim A_{end}$|
| 8GB  DDR4    | 2R    | 16 x 15 x 10 x 64               | $A_{6} \oplus A_{13}$, $A_{14} \oplus A_{18}$, $A_{15} \oplus A_{19}$, $A_{16} \oplus A_{20}$, $A_{17} \oplus A_{21}$ | $A_{18} \sim A_{end}$ |

</center>

> ```Tested on i7-6700K and i7-6700```

-----
## Coffee Lake processors
<center>

| DRAM Size | Ranks | Banks x Rows x Columns x Bits | Bank Selection Bits$^*$ | Row Bits |
|-----------|-------|:-------------------------------:|:----------------:|-----------|
| 8GB  DDR4     | 1R    | 16 x 16 x 10 x 64           | $A_{6} \oplus A_{13}$, $A_{14} \oplus A_{17}$, $A_{15} \oplus A_{18}$, $A_{16} \oplus A_{19}$ |  $A_{17} \sim A_{end}$|

</center>

> ```Tested on i5-9500```

-----
## Comet Lake processors
<center>

| DRAM Size | Ranks | Banks x Rows x Columns x Bits | Bank Selection Bits$^*$ | Row Bits |
|-----------|-------|:-------------------------------:|:----------------:|-----------|
| 16GB  DDR4     | 1R    | 16 x 17 x 10 x 64          | $A_{6} \oplus A_{13}$, $A_{14} \oplus A_{17}$, $A_{15} \oplus A_{18}$, $A_{16} \oplus A_{19}$ |  $A_{17} \sim A_{end}$|

</center>

> ```Tested on i7-10700```
-----

> $^*$ Bank selection bits are not ordered. 

> All DRAM column bits are in the range of $A_{0} \sim A_{12}$. 
 
> ```Ranks``` and ```Banks x Rows x Columns x Bits``` are based on output from ```decode-dimms```

> $A_{end}$ refers to the most significant bit in the physical address space. Note that this may be different from the  MSB based on the DRAM size. For instance, if the memory size is 4GB (0-31), $A_{end}$ can be $A_{32}$ since physical address seen by OS can typically have a wider range (check ```/proc/iomem```). 
